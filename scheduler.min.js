((function(){var a=this,b=function(){var a=[],b=function(a,b,c,d){var e=isNaN(a)?0:a<0?0:a>c?c:a,f=isNaN(b)?d||e:b<0?0:b>c?c:b;return e<f?[e,f]:[f,e]},c=function(a){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();return(b<10?"0"+b:b)+":"+(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)};return{on:function(a,b){return this[a]||(this[a]=[]),this[a].push(b),this},onTimes:function(a,b){var d="1/01/2001 ",e=c(new Date(d+a)),f=b?c(new Date(d+b)):e,g=e<f?[e,f]:[f,e];return this.on("time",g)},onSecs:function(a,c){return this.on("sec",b(a,c,59))},onMins:function(a,c){return this.on("min",b(a,c,59))},onHours:function(a,c){return this.on("hour",b(a,c,23))},onDaysOfWeek:function(a,c){return this.on("dayOfWeek",b(a,c,6))},onWeekends:function(){return this.on("dayOfWeek",[0,0]).on("dayOfWeek",[6,6])},onWeekdays:function(){return this.on("dayOfWeek",[1,5])},onDaysOfMonth:function(a,c){return this.on("dayOfMonth",b(a,c,32))},onLastDayOfMonth:function(){return this.on("dayOfMonth",[32,32])},onDayInstancesOfMonth:function(a,c){return this.on("dayInstanceOfMonth",b(a,c,6))},onLastDayInstanceOfMonth:function(){return this.on("dayInstanceOfMonth",[6,6])},onDaysOfYear:function(a,c){return this.on("dayOfYear",b(a,c,367))},onLastDayOfYear:function(){return this.on("dayOfYear",[367,367])},onWeeksOfMonth:function(a,c){return this.on("weekOfMonth",b(a,c,6))},onWeeksOfYear:function(a,c){return this.on("weekOfYear",b(a,c,52))},onMonths:function(a,c){return this.on("month",b(a,c,11))},onYears:function(a,c){return this.on("year",b(a,c,3e3))},every:function(a,b,c){for(var d=c[0];d<=c[1];d+=b)this.on(a,d,d);return this},everySecs:function(a,c,d){return this.every("sec",a,b(c,d,59,59))},everyMins:function(a,c,d){return this.every("min",a,b(c,d,59,59))},everyHours:function(a,c,d){return this.every("hour",a,b(c,d,23,23))},everyDaysOfMonth:function(a,c,d){return this.every("dayOfMonth",a,b(c,d,32,32))},everyDaysOfYear:function(a,c,d){return this.every("dayOfYear",a,b(c,d,365,367))},everyMonths:function(a,c,d){return this.every("month",a,b(c,d,11,11))},everyYears:function(a,c,d){return this.every("year",a,b(c,d,3e3,3e3))}}};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=b),exports.schedule=b):a.schedule=b})).call(this),function(){var a=this,b=function(a){var a=a,b=function(a,b){var c,e,f=a.length,g;for(e=0;e<f;e++){g=d(a[e],b);if(!c||g<c)c=g}return c},c=function(a,b){var c=new Date(a,b+1,0);return c.getDate()-c.getDay()},d=function(a,b){var c=b,d,f,g,h=1,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;while(c){console.log(c),console.log("loop "+h),h++,i=c.getFullYear();if((f=e(i,a.year,0))!=i){c=f>i?new Date(f,0,1):null;continue}p=Math.floor((c-new Date(i,0,1))/864e5),x=Math.floor((new Date(i+1,0,0)-new Date(i,0,1))/864e5);if((f=e(p,a.dayOfYear,0))!=p){if(f>=367&&p!=x){c=new Date(i+1,0,0);continue}if(f<367){i+=f<p?1:0,c=new Date((new Date(i,0,1)).valueOf()+864e5*f);continue}}o=c.getDay(),m=Math.ceil((p-o)/7);if((f=e(m,a.weekOfYear,0))!=m){i+=f<m?1:0,c=new Date((new Date(i,0,1)).valueOf()+864e5*f*7);continue}j=c.getMonth();if((f=e(j,a.month,12))!=j){c=new Date(i,f,1);continue}k=c.getDate(),u=new Date(i,j+1,0),v=u.getDate();if((f=e(k,a.dayOfMonth,0))!=k){if(f>=32&&k!=v){c=new Date(i,j,v);continue}if(f<32){c=new Date(i,j+(f<k?1:0),f);continue}}l=Math.floor((k-1)/7);if((f=e(l,a.dayInstanceOfMonth,0))!=l){if(f>=6&&k<v-7){c=new Date(i,j,v-7);continue}if(f<6){c=new Date(i,j+(f<l?1:0),f<l?1:k+(f-l)*7);continue}}n=Math.ceil((k-o)/7),w=v-u.getDay();if((f=e(n,a.weekOfMonth,0))!=n){if(f>=6&&k<w){c=new Date(i,j,w);continue}if(f<6){c=new Date(i,j+(f<k?1:0),f*7);continue}}if((f=e(o,a.dayOfWeek,0))!=o){c=new Date(i,j,k+(f<o?7-o:f-o));continue}r=c.getHours();if((f=e(r,a.hour,24))!=r){c=new Date(i,j,k,f);continue}s=c.getMinutes();if((f=e(s,a.min,60))!=s){c=new Date(i,j,k,r,f);continue}t=c.getSeconds();if((f=e(t,a.sec,60))!=t){c=new Date(i,j,k,r,min,f);continue}q=(r<10?"0"+r:r)+":"+(s<10?"0"+s:s)+":"+(t<10?"0"+t:t);if((f=e(q,a.time,0))!=q){g=f.split(":"),c=new Date(i,j,k+(f<q?1:0),g[0],g[1],g[2]);continue}break}return console.log(c),c},e=function(a,b,c){if(!b)return a;var d,e,f=b.length,g,h;for(var i=0;i<f;i++){g=b[i][0],h=b[i][0];if(g<=a&&h>=a)return a;if(!d||g<d)d=g;g>a&&(!e||g<e)&&(e=g)}return e||d+c};return{resolution:a,getNext:function(c,d,e){var f=e||new Date,g=c.length?c:new Array(c),h=d||1,i=[],j;while(h)console.log(h),j=b(g,f),j?(i.push(j),f=new Date(j.getTime()+a*1e3),h--):h=0;return i}}};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=b),exports.scheduler=b):a.scheduler=b}.call(this);